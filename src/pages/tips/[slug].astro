---
import Base from '../../layouts/Base.astro';
import LiveDemo from '../../components/LiveDemo.astro';
import { getCollection } from 'astro:content';

export async function getStaticPaths() {
  const tips = await getCollection('tips');
  return tips.map(tip => ({
    params: { slug: tip.slug },
    props: { tip },
  }));
}

const { tip } = Astro.props;
const { Content } = await tip.render();
---

<Base title={tip.data.title} description={tip.data.description}>
  <article>
    <div style="margin-bottom: 2rem;">
      <a href="/tips" style="color: var(--color-text-light); font-size: 0.875rem;">← Tips一覧に戻る</a>
    </div>

    <h1 style="margin-bottom: 1rem;">{tip.data.title}</h1>

    <p style="font-size: 1.125rem; color: var(--color-text-light); margin-bottom: 2rem;">
      {tip.data.description}
    </p>

    <div style="margin-bottom: 2rem;">
      {tip.data.tags.map((tag: string) => (
        <span class="tag">{tag}</span>
      ))}
    </div>

    <div class="card" style="padding: 2rem;">
      <Content components={{ LiveDemo }} />
    </div>
  </article>
</Base>
