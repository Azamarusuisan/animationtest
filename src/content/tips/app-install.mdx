---
title: App Installï¼ˆPWAï¼‰
description: PWAã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’å®Ÿè£…ã—ã¦ã€ãƒã‚¤ãƒ†ã‚£ãƒ–ã‚¢ãƒ—ãƒªã®ã‚ˆã†ãªä½“é¨“ã‚’æä¾›ã™ã‚‹
tags: [pwa, app-install, manifest, progressive-web-app, mobile]
category: pwa
level: intermediate
date: 2025-11-11
---

import LiveDemo from '../../components/LiveDemo.astro';

## PWAï¼ˆProgressive Web Appï¼‰ã¨ã¯

PWA ã¯ã€Web æŠ€è¡“ã§ä½œã‚‰ã‚ŒãŸã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ãƒã‚¤ãƒ†ã‚£ãƒ–ã‚¢ãƒ—ãƒªã®ã‚ˆã†ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ä½¿ãˆã‚‹ä»•çµ„ã¿ã§ã™ã€‚ãƒ›ãƒ¼ãƒ ç”»é¢ã«è¿½åŠ ã€ã‚ªãƒ•ãƒ©ã‚¤ãƒ³å‹•ä½œã€ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥ãªã©ã€ãƒã‚¤ãƒ†ã‚£ãƒ–ã‚¢ãƒ—ãƒªã«è¿‘ã„ä½“é¨“ã‚’æä¾›ã§ãã¾ã™ã€‚

## ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®å®Ÿè£…

<LiveDemo
  title="PWA ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒ•ãƒ­ãƒ¼ ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼"
  height="700px"
  html={`
<div class="pwa-install-demo">
  <div class="demo-header">
    <h3>ğŸ“± PWA ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒ‡ãƒ¢</h3>
    <p class="subtitle">å®Ÿéš›ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒ•ãƒ­ãƒ¼ã‚’ä½“é¨“</p>
  </div>

  <div class="device-mockup">
    <div class="device-screen">
      <div class="status-bar">
        <span class="time">12:34</span>
        <span class="icons">ğŸ“¶ ğŸ“¶ ğŸ”‹</span>
      </div>

      <div class="app-content">
        <div class="app-header">
          <div class="app-icon">ğŸ¨</div>
          <div class="app-info">
            <h4>My Awesome App</h4>
            <p>Progressive Web App</p>
          </div>
        </div>

        <div class="feature-list">
          <div class="feature-item">
            <span class="feature-icon">âš¡</span>
            <div class="feature-text">
              <strong>é«˜é€Ÿ</strong>
              <small>Service Worker ã§ã‚­ãƒ£ãƒƒã‚·ãƒ¥</small>
            </div>
          </div>
          <div class="feature-item">
            <span class="feature-icon">ğŸ“±</span>
            <div class="feature-text">
              <strong>ã‚ªãƒ•ãƒ©ã‚¤ãƒ³å¯¾å¿œ</strong>
              <small>ãƒãƒƒãƒˆãªã—ã§ã‚‚å‹•ä½œ</small>
            </div>
          </div>
          <div class="feature-item">
            <span class="feature-icon">ğŸ </span>
            <div class="feature-text">
              <strong>ãƒ›ãƒ¼ãƒ ç”»é¢ã«è¿½åŠ </strong>
              <small>ã‚¢ãƒ—ãƒªã®ã‚ˆã†ã«èµ·å‹•</small>
            </div>
          </div>
        </div>

        <div class="install-section">
          <button id="installBtn" class="install-button">
            <span class="btn-icon">ğŸ“¥</span>
            <span class="btn-text">ã‚¢ãƒ—ãƒªã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</span>
          </button>
          <p class="install-hint">ã‚¿ãƒƒãƒ—ã—ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ä½“é¨“</p>
        </div>

        <div class="status-display" id="statusDisplay">
          <div class="status-item">
            <span class="status-label">ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«çŠ¶æ…‹:</span>
            <span class="status-value" id="installStatus">æœªã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</span>
          </div>
          <div class="status-item">
            <span class="status-label">è¡¨ç¤ºãƒ¢ãƒ¼ãƒ‰:</span>
            <span class="status-value" id="displayMode">ãƒ–ãƒ©ã‚¦ã‚¶</span>
          </div>
          <div class="status-item">
            <span class="status-label">ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆçŠ¶æ…‹:</span>
            <span class="status-value" id="promptStatus">å¾…æ©Ÿä¸­</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="control-panel">
    <button class="control-btn" id="resetBtn">
      <span>ğŸ”„</span>
      <span>çŠ¶æ…‹ã‚’ãƒªã‚»ãƒƒãƒˆ</span>
    </button>
    <button class="control-btn" id="showPromptBtn" disabled>
      <span>ğŸ’¬</span>
      <span>ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’è¡¨ç¤º</span>
    </button>
  </div>

  <div class="event-log">
    <div class="log-header">ã‚¤ãƒ™ãƒ³ãƒˆãƒ­ã‚°</div>
    <div class="log-content" id="logContent">
      <div class="log-empty">ã‚¤ãƒ™ãƒ³ãƒˆã‚’å¾…æ©Ÿä¸­...</div>
    </div>
  </div>
</div>

<!-- ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ¢ãƒ¼ãƒ€ãƒ« -->
<div class="install-prompt-modal" id="installModal" style="display: none;">
  <div class="modal-backdrop"></div>
  <div class="modal-content">
    <div class="modal-header">
      <div class="modal-icon">ğŸ¨</div>
      <h4>My Awesome App</h4>
      <p class="modal-url">example.com</p>
    </div>
    <div class="modal-body">
      <p>ã“ã®ã‚¢ãƒ—ãƒªã‚’ãƒ›ãƒ¼ãƒ ç”»é¢ã«è¿½åŠ ã—ã¾ã™ã‹ï¼Ÿ</p>
      <ul class="modal-features">
        <li>âœ“ ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ã§å‹•ä½œ</li>
        <li>âœ“ é«˜é€Ÿãªèµ·å‹•</li>
        <li>âœ“ ã‚¢ãƒ—ãƒªã®ã‚ˆã†ãªä½“é¨“</li>
      </ul>
    </div>
    <div class="modal-actions">
      <button class="modal-btn cancel" id="cancelBtn">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
      <button class="modal-btn install" id="confirmBtn">ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</button>
    </div>
  </div>
</div>
  `}
  css={`
.pwa-install-demo {
  max-width: 800px;
  margin: 0 auto;
  padding: 1.5rem;
}

.demo-header {
  text-align: center;
  margin-bottom: 2rem;
}

.demo-header h3 {
  margin: 0 0 0.5rem 0;
  font-size: 1.5rem;
  color: #e5edf4;
}

.subtitle {
  margin: 0;
  color: #9ca3af;
  font-size: 0.9375rem;
}

.device-mockup {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  border-radius: 24px;
  padding: 1.5rem;
  margin-bottom: 1.5rem;
  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
}

.device-screen {
  background: #0c1218;
  border-radius: 16px;
  overflow: hidden;
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);
}

.status-bar {
  display: flex;
  justify-content: space-between;
  padding: 0.5rem 1rem;
  background: #1f2a37;
  color: #e5edf4;
  font-size: 0.75rem;
}

.app-content {
  padding: 1.5rem;
}

.app-header {
  display: flex;
  align-items: center;
  gap: 1rem;
  margin-bottom: 2rem;
  padding-bottom: 1.5rem;
  border-bottom: 1px solid #374151;
}

.app-icon {
  width: 64px;
  height: 64px;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  border-radius: 16px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 2rem;
  box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
}

.app-info h4 {
  margin: 0 0 0.25rem 0;
  font-size: 1.25rem;
  color: #e5edf4;
}

.app-info p {
  margin: 0;
  color: #9ca3af;
  font-size: 0.875rem;
}

.feature-list {
  display: flex;
  flex-direction: column;
  gap: 1rem;
  margin-bottom: 2rem;
}

.feature-item {
  display: flex;
  align-items: center;
  gap: 1rem;
  padding: 1rem;
  background: #1f2a37;
  border-radius: 8px;
}

.feature-icon {
  font-size: 1.5rem;
}

.feature-text strong {
  display: block;
  color: #e5edf4;
  margin-bottom: 0.25rem;
}

.feature-text small {
  color: #9ca3af;
  font-size: 0.875rem;
}

.install-section {
  text-align: center;
  margin-bottom: 2rem;
}

.install-button {
  display: inline-flex;
  align-items: center;
  gap: 0.75rem;
  padding: 1rem 2rem;
  background: linear-gradient(135deg, #10b981 0%, #059669 100%);
  border: none;
  border-radius: 12px;
  color: white;
  font-size: 1.125rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s;
  box-shadow: 0 4px 16px rgba(16, 185, 129, 0.4);
  width: 100%;
  max-width: 300px;
}

.install-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(16, 185, 129, 0.5);
}

.install-button:active {
  transform: translateY(0);
}

.install-button.installed {
  background: #374151;
  box-shadow: none;
  cursor: not-allowed;
}

.btn-icon {
  font-size: 1.5rem;
}

.install-hint {
  margin: 0.75rem 0 0 0;
  color: #9ca3af;
  font-size: 0.875rem;
}

.status-display {
  background: #1f2a37;
  border-radius: 8px;
  padding: 1rem;
}

.status-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0.5rem 0;
  border-bottom: 1px solid #374151;
  font-size: 0.875rem;
}

.status-item:last-child {
  border-bottom: none;
}

.status-label {
  color: #9ca3af;
}

.status-value {
  color: #10b981;
  font-weight: 600;
}

.control-panel {
  display: flex;
  gap: 1rem;
  margin-bottom: 1.5rem;
}

.control-btn {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  padding: 0.875rem 1.5rem;
  background: #374151;
  border: 1px solid #4b5563;
  border-radius: 8px;
  color: #e5edf4;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s;
  font-size: 0.9375rem;
}

.control-btn:hover:not(:disabled) {
  background: #4b5563;
  transform: translateY(-2px);
}

.control-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.event-log {
  background: #1f2a37;
  border-radius: 8px;
  padding: 1.5rem;
}

.log-header {
  font-size: 0.9375rem;
  font-weight: 600;
  color: #e5edf4;
  margin-bottom: 1rem;
}

.log-content {
  background: #0c1218;
  border-radius: 6px;
  padding: 1rem;
  max-height: 200px;
  overflow-y: auto;
}

.log-empty {
  text-align: center;
  color: #6b7280;
  font-size: 0.875rem;
  padding: 1rem;
}

.log-entry {
  display: flex;
  align-items: start;
  gap: 0.75rem;
  padding: 0.75rem;
  margin-bottom: 0.5rem;
  background: #1f2a37;
  border-radius: 6px;
  font-size: 0.875rem;
  animation: slideIn 0.3s ease-out;
}

.log-time {
  color: #10b981;
  font-weight: 600;
  min-width: 65px;
}

.log-message {
  color: #d1d5db;
  flex: 1;
}

.install-prompt-modal {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  animation: fadeIn 0.3s ease-out;
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes slideIn {
  from {
    opacity: 0;
    transform: translateX(-10px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

.modal-backdrop {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.7);
  backdrop-filter: blur(4px);
}

.modal-content {
  position: relative;
  background: #1f2a37;
  border-radius: 16px;
  width: 90%;
  max-width: 400px;
  padding: 2rem;
  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5);
  animation: modalSlideIn 0.3s ease-out;
}

@keyframes modalSlideIn {
  from {
    opacity: 0;
    transform: scale(0.9) translateY(20px);
  }
  to {
    opacity: 1;
    transform: scale(1) translateY(0);
  }
}

.modal-header {
  text-align: center;
  margin-bottom: 1.5rem;
}

.modal-icon {
  width: 80px;
  height: 80px;
  margin: 0 auto 1rem;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  border-radius: 20px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 2.5rem;
  box-shadow: 0 8px 16px rgba(102, 126, 234, 0.4);
}

.modal-header h4 {
  margin: 0 0 0.5rem 0;
  color: #e5edf4;
  font-size: 1.25rem;
}

.modal-url {
  margin: 0;
  color: #9ca3af;
  font-size: 0.875rem;
}

.modal-body p {
  margin: 0 0 1rem 0;
  color: #d1d5db;
  text-align: center;
}

.modal-features {
  list-style: none;
  padding: 0;
  margin: 0 0 1.5rem 0;
  background: #0c1218;
  border-radius: 8px;
  padding: 1rem;
}

.modal-features li {
  padding: 0.5rem 0;
  color: #d1d5db;
  font-size: 0.9375rem;
}

.modal-actions {
  display: flex;
  gap: 1rem;
}

.modal-btn {
  flex: 1;
  padding: 0.875rem;
  border: none;
  border-radius: 8px;
  font-weight: 600;
  font-size: 1rem;
  cursor: pointer;
  transition: all 0.2s;
}

.modal-btn.cancel {
  background: #374151;
  color: #e5edf4;
}

.modal-btn.cancel:hover {
  background: #4b5563;
}

.modal-btn.install {
  background: linear-gradient(135deg, #10b981 0%, #059669 100%);
  color: white;
}

.modal-btn.install:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(16, 185, 129, 0.4);
}
  `}
  js={`
let isInstalled = false;
let promptDeferred = null;

const installBtn = document.getElementById('installBtn');
const installStatus = document.getElementById('installStatus');
const displayMode = document.getElementById('displayMode');
const promptStatus = document.getElementById('promptStatus');
const logContent = document.getElementById('logContent');
const resetBtn = document.getElementById('resetBtn');
const showPromptBtn = document.getElementById('showPromptBtn');
const installModal = document.getElementById('installModal');
const cancelBtn = document.getElementById('cancelBtn');
const confirmBtn = document.getElementById('confirmBtn');

// ãƒ­ã‚°è¿½åŠ 
function addLog(message) {
  if (logContent.querySelector('.log-empty')) {
    logContent.innerHTML = '';
  }

  const entry = document.createElement('div');
  entry.className = 'log-entry';
  const now = new Date();
  const timeStr = now.toLocaleTimeString('ja-JP', {
    hour: '2-digit',
    minute: '2-digit',
    second: '2-digit'
  });

  entry.innerHTML = \`
    <span class="log-time">\${timeStr}</span>
    <span class="log-message">\${message}</span>
  \`;

  logContent.insertBefore(entry, logContent.firstChild);

  // å¤ã„ãƒ­ã‚°ã‚’å‰Šé™¤ï¼ˆæœ€å¤§10ä»¶ï¼‰
  while (logContent.children.length > 10) {
    logContent.removeChild(logContent.lastChild);
  }
}

// åˆæœŸåŒ–
function initialize() {
  addLog('ğŸ“± ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³èµ·å‹•');
  addLog('â³ beforeinstallprompt ã‚¤ãƒ™ãƒ³ãƒˆå¾…æ©Ÿä¸­...');

  // ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³: 1ç§’å¾Œã«ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæº–å‚™å®Œäº†
  setTimeout(() => {
    promptDeferred = { simulated: true };
    promptStatus.textContent = 'åˆ©ç”¨å¯èƒ½';
    promptStatus.style.color = '#10b981';
    showPromptBtn.disabled = false;
    addLog('âœ… ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæº–å‚™å®Œäº†');
    addLog('ğŸ’¡ ã€Œã‚¢ãƒ—ãƒªã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã€ãƒœã‚¿ãƒ³ãŒæœ‰åŠ¹ã«ãªã‚Šã¾ã—ãŸ');
  }, 1000);
}

// ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯
installBtn.addEventListener('click', () => {
  if (isInstalled) {
    addLog('â„¹ï¸ æ—¢ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿ã§ã™');
    return;
  }

  if (!promptDeferred) {
    addLog('âš ï¸ ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãŒæº–å‚™ã§ãã¦ã„ã¾ã›ã‚“');
    return;
  }

  addLog('ğŸ‘† ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒœã‚¿ãƒ³ãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚Œã¾ã—ãŸ');
  showInstallPrompt();
});

// ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆè¡¨ç¤º
function showInstallPrompt() {
  addLog('ğŸ’¬ ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’è¡¨ç¤º');
  installModal.style.display = 'flex';
  promptStatus.textContent = 'è¡¨ç¤ºä¸­';
  promptStatus.style.color = '#f59e0b';
}

// ã‚­ãƒ£ãƒ³ã‚»ãƒ«
cancelBtn.addEventListener('click', () => {
  addLog('âŒ ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚’ã‚­ãƒ£ãƒ³ã‚»ãƒ«');
  installModal.style.display = 'none';
  promptStatus.textContent = 'åˆ©ç”¨å¯èƒ½';
  promptStatus.style.color = '#10b981';
  addLog('ğŸ’¡ å†åº¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒœã‚¿ãƒ³ã‹ã‚‰å®Ÿè¡Œã§ãã¾ã™');
});

// ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å®Ÿè¡Œ
confirmBtn.addEventListener('click', () => {
  addLog('âœ… ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚’æ‰¿èª');
  installModal.style.display = 'none';

  // ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å‡¦ç†ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
  setTimeout(() => {
    isInstalled = true;
    promptDeferred = null;

    installStatus.textContent = 'ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿';
    installStatus.style.color = '#10b981';

    displayMode.textContent = 'ã‚¹ã‚¿ãƒ³ãƒ‰ã‚¢ãƒ­ãƒ³';
    displayMode.style.color = '#10b981';

    promptStatus.textContent = 'ä½¿ç”¨æ¸ˆã¿';
    promptStatus.style.color = '#6b7280';

    installBtn.classList.add('installed');
    installBtn.innerHTML = '<span class="btn-icon">âœ“</span><span class="btn-text">ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿</span>';
    installBtn.disabled = true;
    showPromptBtn.disabled = true;

    addLog('ğŸ‰ ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å®Œäº†ï¼');
    addLog('ğŸ  ãƒ›ãƒ¼ãƒ ç”»é¢ã‹ã‚‰èµ·å‹•ã§ãã¾ã™');
    addLog('ğŸ“± ã‚¹ã‚¿ãƒ³ãƒ‰ã‚¢ãƒ­ãƒ³ãƒ¢ãƒ¼ãƒ‰ã§å‹•ä½œ');
  }, 500);
});

// ãƒªã‚»ãƒƒãƒˆ
resetBtn.addEventListener('click', () => {
  isInstalled = false;
  promptDeferred = null;

  installStatus.textContent = 'æœªã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«';
  installStatus.style.color = '#9ca3af';

  displayMode.textContent = 'ãƒ–ãƒ©ã‚¦ã‚¶';
  displayMode.style.color = '#9ca3af';

  promptStatus.textContent = 'å¾…æ©Ÿä¸­';
  promptStatus.style.color = '#9ca3af';

  installBtn.classList.remove('installed');
  installBtn.innerHTML = '<span class="btn-icon">ğŸ“¥</span><span class="btn-text">ã‚¢ãƒ—ãƒªã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</span>';
  installBtn.disabled = false;
  showPromptBtn.disabled = true;

  logContent.innerHTML = '<div class="log-empty">ã‚¤ãƒ™ãƒ³ãƒˆã‚’å¾…æ©Ÿä¸­...</div>';

  addLog('ğŸ”„ çŠ¶æ…‹ã‚’ãƒªã‚»ãƒƒãƒˆã—ã¾ã—ãŸ');
  initialize();
});

// ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæ‰‹å‹•è¡¨ç¤º
showPromptBtn.addEventListener('click', () => {
  if (promptDeferred && !isInstalled) {
    showInstallPrompt();
  }
});

// åˆæœŸåŒ–å®Ÿè¡Œ
initialize();
  `}
/>

## Web App Manifest ã®ä½œæˆ

### manifest.json

PWA ã®åŸºæœ¬æƒ…å ±ã‚’å®šç¾©ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã§ã™ï¼š

```json
{
  "name": "My Awesome App",
  "short_name": "MyApp",
  "description": "ç´ æ™´ã‚‰ã—ã„PWAã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³",
  "start_url": "/",
  "display": "standalone",
  "background_color": "#0c1218",
  "theme_color": "#667eea",
  "orientation": "portrait-primary",
  "icons": [
    {
      "src": "/icons/icon-192x192.png",
      "sizes": "192x192",
      "type": "image/png",
      "purpose": "any maskable"
    },
    {
      "src": "/icons/icon-512x512.png",
      "sizes": "512x512",
      "type": "image/png",
      "purpose": "any maskable"
    }
  ]
}
```

### HTML ã« manifest ã‚’ãƒªãƒ³ã‚¯

```html
<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- PWA Manifest -->
  <link rel="manifest" href="/manifest.json">

  <!-- Theme Color -->
  <meta name="theme-color" content="#667eea">

  <!-- Apple Touch Icon -->
  <link rel="apple-touch-icon" href="/icons/icon-192x192.png">

  <title>My Awesome App</title>
</head>
<body>
  <!-- ã‚¢ãƒ—ãƒªã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
</body>
</html>
```

## ã‚¢ã‚¤ã‚³ãƒ³ã®æº–å‚™

### å¿…è¦ãªã‚µã‚¤ã‚º

```
icons/
â”œâ”€â”€ icon-192x192.png    # Android ãƒ›ãƒ¼ãƒ ç”»é¢
â”œâ”€â”€ icon-512x512.png    # Android ã‚¹ãƒ—ãƒ©ãƒƒã‚·ãƒ¥ç”»é¢
â”œâ”€â”€ icon-maskable.png   # Maskable iconï¼ˆAndroidï¼‰
â””â”€â”€ apple-touch-icon.png # iOS ãƒ›ãƒ¼ãƒ ç”»é¢ï¼ˆ180x180ï¼‰
```

### Maskable Icon

Android ã®é©å¿œå‹ã‚¢ã‚¤ã‚³ãƒ³ã«å¯¾å¿œã™ã‚‹ãŸã‚ï¼š

```json
{
  "icons": [
    {
      "src": "/icons/icon-maskable.png",
      "sizes": "512x512",
      "type": "image/png",
      "purpose": "maskable"
    }
  ]
}
```

**ãƒ‡ã‚¶ã‚¤ãƒ³ã‚¬ã‚¤ãƒ‰:**
- ã‚»ãƒ¼ãƒ•ã‚¾ãƒ¼ãƒ³: ä¸­å¤®80%ä»¥å†…ã«é‡è¦ãªè¦ç´ ã‚’é…ç½®
- èƒŒæ™¯: ç«¯ã¾ã§è‰²ã‚’å¡—ã‚‹ï¼ˆé€æ˜ä¸å¯ï¼‰

## beforeinstallprompt ã‚¤ãƒ™ãƒ³ãƒˆã®å®Ÿè£…

### åŸºæœ¬å®Ÿè£…

```javascript
let deferredPrompt;

// beforeinstallprompt ã‚¤ãƒ™ãƒ³ãƒˆã‚’ã‚­ãƒ£ãƒ—ãƒãƒ£
window.addEventListener('beforeinstallprompt', (e) => {
  // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’é˜²ã
  e.preventDefault();

  // å¾Œã§ä½¿ã†ãŸã‚ã«ä¿å­˜
  deferredPrompt = e;

  // ã‚«ã‚¹ã‚¿ãƒ ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒœã‚¿ãƒ³ã‚’è¡¨ç¤º
  showInstallButton();

  console.log('ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæº–å‚™å®Œäº†');
});

// ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒœã‚¿ãƒ³ã®ã‚¯ãƒªãƒƒã‚¯å‡¦ç†
installButton.addEventListener('click', async () => {
  if (!deferredPrompt) {
    return;
  }

  // ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’è¡¨ç¤º
  deferredPrompt.prompt();

  // ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®é¸æŠã‚’å¾…ã¤
  const { outcome } = await deferredPrompt.userChoice;

  console.log(\`ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®é¸æŠ: \${outcome}\`);

  if (outcome === 'accepted') {
    console.log('ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ‰¿èª');
  } else {
    console.log('ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ‹’å¦');
  }

  // ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã¯1å›ã—ã‹ä½¿ãˆãªã„
  deferredPrompt = null;

  // ãƒœã‚¿ãƒ³ã‚’éè¡¨ç¤º
  hideInstallButton();
});
```

### ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å®Œäº†ã®æ¤œå‡º

```javascript
window.addEventListener('appinstalled', (event) => {
  console.log('ã‚¢ãƒ—ãƒªãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¾ã—ãŸ', event);

  // ã‚¢ãƒŠãƒªãƒ†ã‚£ã‚¯ã‚¹ã«é€ä¿¡
  gtag('event', 'app_installed');

  // UIã‚’æ›´æ–°
  hideInstallButton();
  showThankYouMessage();
});
```

## è¡¨ç¤ºãƒ¢ãƒ¼ãƒ‰ã®æ¤œå‡º

### standalone ãƒ¢ãƒ¼ãƒ‰ã§èµ·å‹•ã•ã‚ŒãŸã‹ç¢ºèª

```javascript
// èµ·å‹•æ™‚ã«ç¢ºèª
if (window.matchMedia('(display-mode: standalone)').matches) {
  console.log('ã‚¹ã‚¿ãƒ³ãƒ‰ã‚¢ãƒ­ãƒ³ãƒ¢ãƒ¼ãƒ‰ã§èµ·å‹•');
  // ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒœã‚¿ãƒ³ã‚’éè¡¨ç¤º
  hideInstallButton();
}

// iOS Safari ã®å ´åˆ
if (window.navigator.standalone === true) {
  console.log('iOS ã‚¹ã‚¿ãƒ³ãƒ‰ã‚¢ãƒ­ãƒ³ãƒ¢ãƒ¼ãƒ‰ã§èµ·å‹•');
}

// å¤‰æ›´ã‚’ç›£è¦–
window.matchMedia('(display-mode: standalone)').addEventListener('change', (e) => {
  if (e.matches) {
    console.log('ã‚¹ã‚¿ãƒ³ãƒ‰ã‚¢ãƒ­ãƒ³ãƒ¢ãƒ¼ãƒ‰ã«åˆ‡ã‚Šæ›¿ã‚ã£ãŸ');
  }
});
```

### CSS ã§è¡¨ç¤ºãƒ¢ãƒ¼ãƒ‰ã«å¿œã˜ãŸã‚¹ã‚¿ã‚¤ãƒ«

```css
/* ãƒ–ãƒ©ã‚¦ã‚¶ã§é–‹ã„ã¦ã„ã‚‹æ™‚ */
@media (display-mode: browser) {
  .install-banner {
    display: block;
  }
}

/* ã‚¹ã‚¿ãƒ³ãƒ‰ã‚¢ãƒ­ãƒ³ã‚¢ãƒ—ãƒªã¨ã—ã¦èµ·å‹•ã—ãŸæ™‚ */
@media (display-mode: standalone) {
  .install-banner {
    display: none;
  }

  .app-header {
    /* ãƒã‚¤ãƒ†ã‚£ãƒ–ã‚¢ãƒ—ãƒªã£ã½ã„ã‚¹ã‚¿ã‚¤ãƒ« */
    padding-top: env(safe-area-inset-top);
  }
}
```

## ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«åŸºæº–ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

PWA ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å¯èƒ½ã«ã™ã‚‹ãŸã‚ã®è¦ä»¶ï¼š

### å¿…é ˆè¦ä»¶

- [ ] **HTTPS** ã§é…ä¿¡ï¼ˆlocalhost ã¯ä¾‹å¤–ï¼‰
- [ ] **Web App Manifest** ã‚’é…ç½®
  - `name` ã¾ãŸã¯ `short_name`
  - `icons`ï¼ˆ192px ã¨ 512pxï¼‰
  - `start_url`
  - `display`ï¼ˆstandalone, fullscreen, minimal-ui ã®ã„ãšã‚Œã‹ï¼‰
- [ ] **Service Worker** ãŒç™»éŒ²ã•ã‚Œã¦ã„ã‚‹
  - `fetch` ã‚¤ãƒ™ãƒ³ãƒˆã‚’ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
  - ã‚ªãƒ•ãƒ©ã‚¤ãƒ³å¯¾å¿œ

### æ¨å¥¨è¦ä»¶

- [ ] 512x512 ã® Maskable icon
- [ ] Apple Touch Iconï¼ˆiOSç”¨ï¼‰
- [ ] Theme color è¨­å®š
- [ ] Screenshotsï¼ˆmanifest ã«è¿½åŠ å¯èƒ½ï¼‰

## å®Œå…¨ãªå®Ÿè£…ä¾‹

### index.html

```html
<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- PWA -->
  <link rel="manifest" href="/manifest.json">
  <meta name="theme-color" content="#667eea">
  <link rel="apple-touch-icon" href="/icons/apple-touch-icon.png">

  <title>My PWA App</title>
</head>
<body>
  <header>
    <h1>My PWA App</h1>
  </header>

  <!-- ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒãƒŠãƒ¼ -->
  <div id="installBanner" style="display: none;">
    <p>ã“ã®ã‚¢ãƒ—ãƒªã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ãã¾ã™</p>
    <button id="installButton">ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</button>
    <button id="dismissButton">Ã—</button>
  </div>

  <main>
    <!-- ã‚¢ãƒ—ãƒªã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
  </main>

  <script src="/js/app.js"></script>
</body>
</html>
```

### app.js

```javascript
// Service Worker ç™»éŒ²
if ('serviceWorker' in navigator) {
  window.addEventListener('load', () => {
    navigator.serviceWorker.register('/sw.js')
      .then(registration => {
        console.log('Service Worker registered:', registration);
      })
      .catch(error => {
        console.log('Service Worker registration failed:', error);
      });
  });
}

// PWA ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
let deferredPrompt;
const installBanner = document.getElementById('installBanner');
const installButton = document.getElementById('installButton');
const dismissButton = document.getElementById('dismissButton');

// beforeinstallprompt ã‚¤ãƒ™ãƒ³ãƒˆ
window.addEventListener('beforeinstallprompt', (e) => {
  e.preventDefault();
  deferredPrompt = e;

  // ã‚¹ã‚¿ãƒ³ãƒ‰ã‚¢ãƒ­ãƒ³ãƒ¢ãƒ¼ãƒ‰ã§ãªã‘ã‚Œã°ãƒãƒŠãƒ¼è¡¨ç¤º
  if (!window.matchMedia('(display-mode: standalone)').matches) {
    installBanner.style.display = 'block';
  }
});

// ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒœã‚¿ãƒ³
installButton.addEventListener('click', async () => {
  if (!deferredPrompt) return;

  deferredPrompt.prompt();
  const { outcome } = await deferredPrompt.userChoice;

  console.log(\`User choice: \${outcome}\`);

  // ã‚¢ãƒŠãƒªãƒ†ã‚£ã‚¯ã‚¹é€ä¿¡
  if (typeof gtag !== 'undefined') {
    gtag('event', 'pwa_install_prompt', {
      outcome: outcome
    });
  }

  deferredPrompt = null;
  installBanner.style.display = 'none';
});

// é–‰ã˜ã‚‹ãƒœã‚¿ãƒ³
dismissButton.addEventListener('click', () => {
  installBanner.style.display = 'none';

  // 24æ™‚é–“å¾Œã¾ã§è¡¨ç¤ºã—ãªã„
  localStorage.setItem('installBannerDismissed', Date.now());
});

// ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å®Œäº†
window.addEventListener('appinstalled', () => {
  console.log('PWA installed');
  installBanner.style.display = 'none';

  // ã‚¢ãƒŠãƒªãƒ†ã‚£ã‚¯ã‚¹é€ä¿¡
  if (typeof gtag !== 'undefined') {
    gtag('event', 'pwa_installed');
  }
});

// èµ·å‹•æ™‚ã®è¡¨ç¤ºãƒ¢ãƒ¼ãƒ‰ç¢ºèª
if (window.matchMedia('(display-mode: standalone)').matches) {
  console.log('Launched in standalone mode');
}
```

## iOS Safari ã§ã®å¯¾å¿œ

### Add to Home Screen ã®æ¡ˆå†…

iOS ã§ã¯è‡ªå‹•ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãŒå‡ºãªã„ãŸã‚ã€æ‰‹å‹•æ¡ˆå†…ãŒå¿…è¦ï¼š

```javascript
function isIOS() {
  return /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;
}

function showIOSInstallInstructions() {
  const isInStandaloneMode = window.navigator.standalone === true;

  if (isIOS() && !isInStandaloneMode) {
    // iOS ç”¨ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ‰‹é †ã‚’è¡¨ç¤º
    showModal({
      title: 'ãƒ›ãƒ¼ãƒ ç”»é¢ã«è¿½åŠ ',
      content: `
        <ol>
          <li>ç”»é¢ä¸‹éƒ¨ã®å…±æœ‰ãƒœã‚¿ãƒ³ï¼ˆ<span style="font-size: 1.2em;">â‹</span>ï¼‰ã‚’ã‚¿ãƒƒãƒ—</li>
          <li>ã€Œãƒ›ãƒ¼ãƒ ç”»é¢ã«è¿½åŠ ã€ã‚’é¸æŠ</li>
          <li>ã€Œè¿½åŠ ã€ã‚’ã‚¿ãƒƒãƒ—</li>
        </ol>
      `
    });
  }
}
```

### iOS å°‚ç”¨ meta ã‚¿ã‚°

```html
<!-- iOS ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒãƒ¼ã®ã‚¹ã‚¿ã‚¤ãƒ« -->
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

<!-- iOS ã‚¢ãƒ—ãƒªå -->
<meta name="apple-mobile-web-app-title" content="MyApp">

<!-- iOS ã§ã‚¹ã‚¿ãƒ³ãƒ‰ã‚¢ãƒ­ãƒ³èµ·å‹•ã‚’è¨±å¯ -->
<meta name="apple-mobile-web-app-capable" content="yes">
```

## ãƒ†ã‚¹ãƒˆæ–¹æ³•

### Chrome DevToolsï¼ˆDesktopï¼‰

1. **Application ã‚¿ãƒ–** ã‚’é–‹ã
2. **Manifest** ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§è¨­å®šã‚’ç¢ºèª
3. **Service Workers** ãŒç™»éŒ²ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
4. **Add to home screen** ãƒªãƒ³ã‚¯ã§ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’ãƒ†ã‚¹ãƒˆ

### å®Ÿæ©Ÿãƒ†ã‚¹ãƒˆï¼ˆAndroidï¼‰

1. Chrome ã§ HTTPS ã‚µã‚¤ãƒˆã‚’é–‹ã
2. ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‹ã‚‰ã€Œãƒ›ãƒ¼ãƒ ç”»é¢ã«è¿½åŠ ã€
3. ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãŒè¡¨ç¤ºã•ã‚Œã‚‹ã‹ç¢ºèª
4. ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å¾Œã€ã‚¢ãƒ—ãƒªãƒ‰ãƒ­ãƒ¯ãƒ¼ã‹ã‚‰èµ·å‹•

### å®Ÿæ©Ÿãƒ†ã‚¹ãƒˆï¼ˆiOSï¼‰

1. Safari ã§ã‚µã‚¤ãƒˆã‚’é–‹ã
2. å…±æœ‰ãƒœã‚¿ãƒ³ã‚’ã‚¿ãƒƒãƒ—
3. ã€Œãƒ›ãƒ¼ãƒ ç”»é¢ã«è¿½åŠ ã€ã‚’é¸æŠ
4. ãƒ›ãƒ¼ãƒ ç”»é¢ã‹ã‚‰èµ·å‹•ã—ã¦ã‚¹ã‚¿ãƒ³ãƒ‰ã‚¢ãƒ­ãƒ³ãƒ¢ãƒ¼ãƒ‰ã‚’ç¢ºèª

## ã‚¢ãƒŠãƒªãƒ†ã‚£ã‚¯ã‚¹ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°

### ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒ•ã‚¡ãƒãƒ«ã®è¿½è·¡

```javascript
// Google Analytics ã§ã®ä¾‹
window.addEventListener('beforeinstallprompt', (e) => {
  gtag('event', 'pwa_prompt_shown');
  // ...ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆå‡¦ç†
});

installButton.addEventListener('click', async () => {
  deferredPrompt.prompt();
  const { outcome } = await deferredPrompt.userChoice;

  gtag('event', 'pwa_install_prompt_result', {
    result: outcome  // 'accepted' or 'dismissed'
  });
});

window.addEventListener('appinstalled', () => {
  gtag('event', 'pwa_installed');
});

// èµ·å‹•ãƒ¢ãƒ¼ãƒ‰ã‚’è¿½è·¡
if (window.matchMedia('(display-mode: standalone)').matches) {
  gtag('event', 'pwa_launched', {
    mode: 'standalone'
  });
}
```

## ã‚ˆãã‚ã‚‹å•é¡Œã¨è§£æ±ºç­–

### 1. ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãŒè¡¨ç¤ºã•ã‚Œãªã„

**ç¢ºèªäº‹é …:**
- HTTPS ã§é…ä¿¡ã•ã‚Œã¦ã„ã‚‹ã‹
- manifest.json ãŒæ­£ã—ãèª­ã¿è¾¼ã¾ã‚Œã¦ã„ã‚‹ã‹
- Service Worker ãŒç™»éŒ²ã•ã‚Œã¦ã„ã‚‹ã‹
- æ—¢ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿ã§ã¯ãªã„ã‹

### 2. iOS ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ããªã„

**åŸå› :** iOS ã¯ beforeinstallprompt éå¯¾å¿œ

**è§£æ±ºç­–:** æ‰‹å‹•ã§ã€Œãƒ›ãƒ¼ãƒ ç”»é¢ã«è¿½åŠ ã€ã®æ¡ˆå†…ã‚’è¡¨ç¤º

### 3. ã‚¢ã‚¤ã‚³ãƒ³ãŒæ­£ã—ãè¡¨ç¤ºã•ã‚Œãªã„

**ç¢ºèªäº‹é …:**
- ã‚¢ã‚¤ã‚³ãƒ³ã‚µã‚¤ã‚ºãŒ 192x192ã€512x512 ã‹
- ã‚¢ã‚¤ã‚³ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ãŒå®Ÿéš›ã«å­˜åœ¨ã™ã‚‹ã‹
- manifest.json ã®ãƒ‘ã‚¹ãŒæ­£ã—ã„ã‹

## ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

### UXè¨­è¨ˆ

- **æŠ¼ã—ä»˜ã‘ãªã„**: é©åˆ‡ãªã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆè¡¨ç¤º
- **ä¾¡å€¤ã‚’ä¼ãˆã‚‹**: ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã®ãƒ¡ãƒªãƒƒãƒˆã‚’æ˜ç¢ºã«
- **ç°¡å˜ã«é–‰ã˜ã‚‰ã‚Œã‚‹**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæ‹’å¦ã—ã‚„ã™ã
- **å†è¡¨ç¤ºã®é…æ…®**: ä¸€åº¦æ‹’å¦ã—ãŸã‚‰æ•°æ—¥å¾…ã¤

### ã‚³ãƒ¼ãƒ‰è¨­è¨ˆ

- **ãƒ—ãƒ­ã‚°ãƒ¬ãƒƒã‚·ãƒ–ã‚¨ãƒ³ãƒãƒ³ã‚¹ãƒ¡ãƒ³ãƒˆ**: PWA éå¯¾å¿œã§ã‚‚å‹•ä½œ
- **çŠ¶æ…‹ç®¡ç†**: ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿ã‹ã‚’ localStorage ã§ç®¡ç†
- **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°**: ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆå¤±æ•—æ™‚ã®å‡¦ç†

```javascript
// ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«çŠ¶æ…‹ã‚’ä¿å­˜
const PWAInstall = {
  isInstalled() {
    return localStorage.getItem('pwa_installed') === 'true' ||
           window.matchMedia('(display-mode: standalone)').matches;
  },

  markAsInstalled() {
    localStorage.setItem('pwa_installed', 'true');
  },

  shouldShowPrompt() {
    if (this.isInstalled()) return false;

    const lastDismissed = localStorage.getItem('installPromptDismissed');
    if (lastDismissed) {
      const daysSince = (Date.now() - parseInt(lastDismissed)) / (1000 * 60 * 60 * 24);
      return daysSince > 7; // 7æ—¥å¾Œã«å†è¡¨ç¤º
    }

    return true;
  }
};
```

## ã¾ã¨ã‚

1. **manifest.json** ã§ã‚¢ãƒ—ãƒªæƒ…å ±ã‚’å®šç¾©
2. **Service Worker** ã§ã‚ªãƒ•ãƒ©ã‚¤ãƒ³å¯¾å¿œ
3. **beforeinstallprompt** ã§ã‚«ã‚¹ã‚¿ãƒ UIå®Ÿè£…
4. **iOS å¯¾å¿œ** ã‚’å¿˜ã‚Œãšã«ï¼ˆæ‰‹å‹•æ¡ˆå†…ï¼‰
5. **ã‚¢ãƒŠãƒªãƒ†ã‚£ã‚¯ã‚¹** ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«çŠ¶æ³ã‚’è¿½è·¡

PWA ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ©Ÿèƒ½ã«ã‚ˆã‚Šã€Web ã‚¢ãƒ—ãƒªãŒãƒã‚¤ãƒ†ã‚£ãƒ–ã‚¢ãƒ—ãƒªã®ã‚ˆã†ãªä½“é¨“ã‚’æä¾›ã§ãã¾ã™ã€‚

## å‚è€ƒãƒªãƒ³ã‚¯

- [Web App Manifest - MDN](https://developer.mozilla.org/ja/docs/Web/Manifest)
- [beforeinstallprompt - web.dev](https://web.dev/customize-install/)
- [Maskable Icons](https://web.dev/maskable-icon/)
- [PWA Install Criteria](https://web.dev/install-criteria/)
- [iOS Web App Meta Tags](https://developer.apple.com/library/archive/documentation/AppleApplications/Reference/SafariWebContent/ConfiguringWebApplications/ConfiguringWebApplications.html)
