---
title: ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ç”»åƒã®æœ€é©åŒ–
description: srcsetã€pictureè¦ç´ ã€lazy loadingã‚’ä½¿ã£ãŸåŠ¹ç‡çš„ãªç”»åƒé…ä¿¡
tags: [responsive, images, performance, optimization]
category: responsive
level: intermediate
date: 2025-11-11
---

import LiveDemo from '../../components/LiveDemo.astro';

<LiveDemo
  title="ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ç”»åƒãƒ†ã‚¯ãƒ‹ãƒƒã‚¯ ãƒ‡ãƒ¢"
  height="900px"
  html={`
<div class="responsive-images-demo">
  <section class="demo-section">
    <h2>1. srcset ã«ã‚ˆã‚‹è§£åƒåº¦å¯¾å¿œ</h2>
    <div class="image-container">
      <div class="mock-image resolution-demo">
        <div class="image-placeholder">
          <span class="icon">ğŸ–¼ï¸</span>
          <p><strong>srcset</strong> ãƒ‡ãƒ¢</p>
          <p class="detail">ç”»é¢å¯†åº¦ã«å¿œã˜ãŸç”»åƒ</p>
          <code class="active-src" id="srcsetActive">1xç”»åƒ</code>
        </div>
      </div>
      <div class="code-example">
        <pre><code>&lt;img
  src="image-1x.jpg"
  srcset="
    image-1x.jpg 1x,
    image-2x.jpg 2x,
    image-3x.jpg 3x
  "
  alt="ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ç”»åƒ"
/&gt;</code></pre>
      </div>
    </div>
  </section>

  <section class="demo-section">
    <h2>2. ã‚µã‚¤ã‚ºãƒ™ãƒ¼ã‚¹ã® srcset</h2>
    <div class="image-container">
      <div class="mock-image size-demo">
        <div class="image-placeholder">
          <span class="icon">ğŸ“</span>
          <p><strong>sizes</strong> ãƒ‡ãƒ¢</p>
          <p class="detail">ãƒ“ãƒ¥ãƒ¼ãƒãƒ¼ãƒˆå¹…ã«å¿œã˜ãŸç”»åƒ</p>
          <div class="viewport-info">
            <span id="viewportWidth">-</span>px
          </div>
        </div>
      </div>
      <div class="code-example">
        <pre><code>&lt;img
  srcset="
    small.jpg 400w,
    medium.jpg 800w,
    large.jpg 1200w
  "
  sizes="
    (max-width: 640px) 100vw,
    (max-width: 1024px) 50vw,
    33vw
  "
  src="medium.jpg"
  alt="ã‚µã‚¤ã‚ºæŒ‡å®š"
/&gt;</code></pre>
      </div>
    </div>
  </section>

  <section class="demo-section">
    <h2>3. pictureè¦ç´ ã«ã‚ˆã‚‹ã‚¢ãƒ¼ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³</h2>
    <div class="image-container">
      <div class="art-direction-demo">
        <div class="viewport-simulator mobile">
          <div class="mock-image small">
            <span class="icon">ğŸ“±</span>
            <p>ãƒ¢ãƒã‚¤ãƒ«ç‰ˆ</p>
            <p class="detail">ç¸¦é•·ãƒ»ãƒãƒ¼ãƒˆãƒ¬ãƒ¼ãƒˆ</p>
          </div>
        </div>
        <div class="viewport-simulator tablet">
          <div class="mock-image medium">
            <span class="icon">ğŸ’»</span>
            <p>ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆç‰ˆ</p>
            <p class="detail">æ­£æ–¹å½¢</p>
          </div>
        </div>
        <div class="viewport-simulator desktop">
          <div class="mock-image large">
            <span class="icon">ğŸ–¥ï¸</span>
            <p>ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ç‰ˆ</p>
            <p class="detail">æ¨ªé•·ãƒ»ãƒ©ãƒ³ãƒ‰ã‚¹ã‚±ãƒ¼ãƒ—</p>
          </div>
        </div>
      </div>
      <div class="code-example">
        <pre><code>&lt;picture&gt;
  &lt;source
    media="(max-width: 640px)"
    srcset="mobile.jpg"
  /&gt;
  &lt;source
    media="(max-width: 1024px)"
    srcset="tablet.jpg"
  /&gt;
  &lt;img
    src="desktop.jpg"
    alt="ã‚¢ãƒ¼ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³"
  /&gt;
&lt;/picture&gt;</code></pre>
      </div>
    </div>
  </section>

  <section class="demo-section">
    <h2>4. WebPãƒ»AVIFå¯¾å¿œ</h2>
    <div class="format-comparison">
      <div class="format-card">
        <div class="format-icon">ğŸ–¼ï¸</div>
        <h3>JPEG</h3>
        <div class="format-details">
          <span class="size">100 KB</span>
          <span class="support">âœ“ å…¨ãƒ–ãƒ©ã‚¦ã‚¶</span>
        </div>
      </div>
      <div class="format-card webp">
        <div class="format-icon">âš¡</div>
        <h3>WebP</h3>
        <div class="format-details">
          <span class="size">65 KB (-35%)</span>
          <span class="support">âœ“ ãƒ¢ãƒ€ãƒ³ãƒ–ãƒ©ã‚¦ã‚¶</span>
        </div>
      </div>
      <div class="format-card avif">
        <div class="format-icon">ğŸš€</div>
        <h3>AVIF</h3>
        <div class="format-details">
          <span class="size">45 KB (-55%)</span>
          <span class="support">âœ“ æœ€æ–°ãƒ–ãƒ©ã‚¦ã‚¶</span>
        </div>
      </div>
    </div>
    <div class="code-example">
      <pre><code>&lt;picture&gt;
  &lt;source srcset="image.avif" type="image/avif" /&gt;
  &lt;source srcset="image.webp" type="image/webp" /&gt;
  &lt;img src="image.jpg" alt="ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯" /&gt;
&lt;/picture&gt;</code></pre>
    </div>
  </section>

  <section class="demo-section">
    <h2>5. Lazy Loading ãƒ‡ãƒ¢</h2>
    <div class="lazy-demo-container">
      <div class="scroll-indicator">
        ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã—ã¦ç¢ºèª â†“
      </div>
      <div class="lazy-images">
        <div class="lazy-image-item" data-loaded="false">
          <div class="loading-placeholder">èª­ã¿è¾¼ã¿ä¸­...</div>
          <span class="lazy-status">æœªèª­ã¿è¾¼ã¿</span>
        </div>
        <div class="lazy-image-item" data-loaded="false">
          <div class="loading-placeholder">èª­ã¿è¾¼ã¿ä¸­...</div>
          <span class="lazy-status">æœªèª­ã¿è¾¼ã¿</span>
        </div>
        <div class="lazy-image-item" data-loaded="false">
          <div class="loading-placeholder">èª­ã¿è¾¼ã¿ä¸­...</div>
          <span class="lazy-status">æœªèª­ã¿è¾¼ã¿</span>
        </div>
      </div>
    </div>
    <div class="code-example">
      <pre><code>&lt;img
  src="image.jpg"
  loading="lazy"
  alt="é…å»¶èª­ã¿è¾¼ã¿"
/&gt;</code></pre>
    </div>
  </section>

  <section class="demo-section stats-section">
    <h2>ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ¯”è¼ƒ</h2>
    <div class="stats-grid">
      <div class="stat-card bad">
        <div class="stat-icon">âŒ</div>
        <div class="stat-label">æœ€é©åŒ–ãªã—</div>
        <div class="stat-value">2.5 MB</div>
        <div class="stat-time">5.2ç§’</div>
      </div>
      <div class="stat-card good">
        <div class="stat-icon">âœ“</div>
        <div class="stat-label">srcset + WebP</div>
        <div class="stat-value">450 KB</div>
        <div class="stat-time">0.9ç§’</div>
      </div>
      <div class="stat-card excellent">
        <div class="stat-icon">ğŸš€</div>
        <div class="stat-label">å®Œå…¨æœ€é©åŒ–</div>
        <div class="stat-value">180 KB</div>
        <div class="stat-time">0.4ç§’</div>
      </div>
    </div>
  </section>
</div>
  `}
  css={`
    .responsive-images-demo {
      max-width: 900px;
      margin: 0 auto;
    }

    .demo-section {
      background: #1f2a37;
      padding: 2rem;
      border-radius: 12px;
      margin-bottom: 2rem;
      border: 1px solid #374151;
    }

    .demo-section h2 {
      color: #60a5fa;
      font-size: 1.25rem;
      margin-bottom: 1.5rem;
    }

    .image-container {
      display: flex;
      flex-direction: column;
      gap: 1.5rem;
    }

    .mock-image {
      background: #0c1218;
      border: 2px solid #374151;
      border-radius: 8px;
      overflow: hidden;
      transition: all 0.3s;
    }

    .image-placeholder {
      padding: 3rem 2rem;
      text-align: center;
    }

    .icon {
      font-size: 3rem;
      display: block;
      margin-bottom: 1rem;
    }

    .image-placeholder p {
      margin: 0.5rem 0;
    }

    .detail {
      color: #9ca3af;
      font-size: 0.875rem;
    }

    .active-src {
      display: inline-block;
      margin-top: 1rem;
      padding: 0.5rem 1rem;
      background: #374151;
      border-radius: 6px;
      color: #10b981;
      font-size: 0.875rem;
    }

    .viewport-info {
      margin-top: 1rem;
      font-size: 1.25rem;
      font-weight: 700;
      color: #60a5fa;
    }

    .code-example {
      background: #0c1218;
      padding: 1rem;
      border-radius: 8px;
      border: 1px solid #374151;
    }

    .code-example pre {
      margin: 0;
      overflow-x: auto;
    }

    .code-example code {
      font-family: 'Courier New', monospace;
      font-size: 0.75rem;
      line-height: 1.6;
      color: #e5edf4;
    }

    .art-direction-demo {
      display: flex;
      gap: 1rem;
      justify-content: space-around;
      flex-wrap: wrap;
    }

    .viewport-simulator {
      flex: 1;
      min-width: 150px;
      padding: 1rem;
      background: #0c1218;
      border-radius: 8px;
      border: 2px solid #374151;
    }

    .viewport-simulator .mock-image {
      aspect-ratio: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 1rem;
    }

    .mobile .mock-image {
      aspect-ratio: 9/16;
    }

    .tablet .mock-image {
      aspect-ratio: 1;
    }

    .desktop .mock-image {
      aspect-ratio: 16/9;
    }

    .format-comparison {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 1rem;
      margin-bottom: 1.5rem;
    }

    .format-card {
      background: #0c1218;
      padding: 1.5rem;
      border-radius: 8px;
      border: 2px solid #374151;
      text-align: center;
      transition: all 0.3s;
    }

    .format-card:hover {
      transform: translateY(-4px);
      border-color: #4b5563;
    }

    .format-card.webp {
      border-color: #3b82f6;
    }

    .format-card.avif {
      border-color: #10b981;
    }

    .format-icon {
      font-size: 2.5rem;
      margin-bottom: 0.5rem;
    }

    .format-card h3 {
      font-size: 1.125rem;
      margin-bottom: 1rem;
    }

    .format-details {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }

    .format-details .size {
      font-weight: 700;
      color: #60a5fa;
    }

    .format-details .support {
      font-size: 0.75rem;
      color: #9ca3af;
    }

    .lazy-demo-container {
      background: #0c1218;
      padding: 1.5rem;
      border-radius: 8px;
      margin-bottom: 1.5rem;
      max-height: 300px;
      overflow-y: auto;
    }

    .scroll-indicator {
      text-align: center;
      padding: 1rem;
      color: #9ca3af;
      font-size: 0.875rem;
      border-bottom: 1px solid #374151;
      margin-bottom: 1rem;
    }

    .lazy-images {
      display: flex;
      flex-direction: column;
      gap: 2rem;
    }

    .lazy-image-item {
      background: #1f2a37;
      border: 2px solid #374151;
      border-radius: 8px;
      padding: 2rem;
      text-align: center;
      min-height: 150px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 1rem;
      transition: all 0.3s;
    }

    .lazy-image-item[data-loaded="true"] {
      border-color: #10b981;
      background: linear-gradient(135deg, #1f2a37 0%, #374151 100%);
    }

    .loading-placeholder {
      font-size: 1rem;
      color: #9ca3af;
    }

    .lazy-image-item[data-loaded="true"] .loading-placeholder {
      color: #10b981;
    }

    .lazy-image-item[data-loaded="true"] .loading-placeholder::before {
      content: "âœ“ ";
    }

    .lazy-status {
      font-size: 0.75rem;
      padding: 0.25rem 0.75rem;
      background: #374151;
      border-radius: 4px;
      color: #9ca3af;
    }

    .lazy-image-item[data-loaded="true"] .lazy-status {
      background: #10b981;
      color: white;
    }

    .stats-section {
      background: linear-gradient(135deg, #1f2a37 0%, #374151 100%);
      border: 2px solid #60a5fa;
    }

    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1rem;
    }

    .stat-card {
      background: #0c1218;
      padding: 1.5rem;
      border-radius: 8px;
      border: 2px solid #374151;
      text-align: center;
    }

    .stat-card.bad {
      border-color: #ef4444;
    }

    .stat-card.good {
      border-color: #3b82f6;
    }

    .stat-card.excellent {
      border-color: #10b981;
    }

    .stat-icon {
      font-size: 2rem;
      margin-bottom: 0.5rem;
    }

    .stat-label {
      font-size: 0.875rem;
      color: #9ca3af;
      margin-bottom: 0.5rem;
    }

    .stat-value {
      font-size: 1.5rem;
      font-weight: 700;
      color: #60a5fa;
      margin-bottom: 0.25rem;
    }

    .stat-time {
      font-size: 0.875rem;
      color: #9ca3af;
    }

    @media (max-width: 640px) {
      .art-direction-demo {
        flex-direction: column;
      }

      .format-comparison {
        grid-template-columns: 1fr;
      }

      .stats-grid {
        grid-template-columns: 1fr;
      }
    }
  `}
  js={`
    // ãƒ“ãƒ¥ãƒ¼ãƒãƒ¼ãƒˆå¹…ã®è¡¨ç¤º
    function updateViewportWidth() {
      const width = window.innerWidth;
      const display = document.getElementById('viewportWidth');
      if (display) {
        display.textContent = width;
      }
    }

    updateViewportWidth();
    window.addEventListener('resize', updateViewportWidth);

    // ãƒ‡ãƒã‚¤ã‚¹ãƒ”ã‚¯ã‚»ãƒ«æ¯”ã®è¡¨ç¤º
    const dpr = window.devicePixelRatio || 1;
    const srcsetDisplay = document.getElementById('srcsetActive');
    if (srcsetDisplay) {
      if (dpr >= 3) {
        srcsetDisplay.textContent = '3xç”»åƒï¼ˆé«˜è§£åƒåº¦ï¼‰';
      } else if (dpr >= 2) {
        srcsetDisplay.textContent = '2xç”»åƒï¼ˆRetinaï¼‰';
      } else {
        srcsetDisplay.textContent = '1xç”»åƒï¼ˆæ¨™æº–ï¼‰';
      }
    }

    // Lazy Loading ã®ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
    const lazyContainer = document.querySelector('.lazy-demo-container');
    const lazyItems = document.querySelectorAll('.lazy-image-item');

    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          const item = entry.target;
          setTimeout(() => {
            item.setAttribute('data-loaded', 'true');
            const placeholder = item.querySelector('.loading-placeholder');
            const status = item.querySelector('.lazy-status');
            if (placeholder) placeholder.textContent = 'èª­ã¿è¾¼ã¿å®Œäº†';
            if (status) status.textContent = 'èª­ã¿è¾¼ã¿æ¸ˆã¿';
          }, 500);
          observer.unobserve(item);
        }
      });
    }, {
      root: lazyContainer,
      threshold: 0.1
    });

    lazyItems.forEach(item => observer.observe(item));
  `}
/>

## ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ç”»åƒã¨ã¯

ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ç”»åƒã¯ã€ãƒ‡ãƒã‚¤ã‚¹ã®ç”»é¢ã‚µã‚¤ã‚ºã€è§£åƒåº¦ã€ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯é€Ÿåº¦ã«å¿œã˜ã¦æœ€é©ãªç”»åƒã‚’é…ä¿¡ã™ã‚‹æŠ€è¡“ã§ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Š:

- **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å‘ä¸Š**: ä¸è¦ã«å¤§ããªç”»åƒã‚’é¿ã‘ã‚‹
- **å¸¯åŸŸå¹…ã®ç¯€ç´„**: ãƒ¢ãƒã‚¤ãƒ«ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ‡ãƒ¼ã‚¿ä½¿ç”¨é‡ã‚’å‰Šæ¸›
- **ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“å‘ä¸Š**: é«˜è§£åƒåº¦ãƒ‡ã‚£ã‚¹ãƒ—ãƒ¬ã‚¤ã§ç¾ã—ãè¡¨ç¤º
- **SEOæ”¹å–„**: ãƒšãƒ¼ã‚¸ã®èª­ã¿è¾¼ã¿é€Ÿåº¦ãŒå‘ä¸Š

## srcset ã¨ sizes å±æ€§

### è§£åƒåº¦ãƒ™ãƒ¼ã‚¹ã® srcset

ãƒ‡ãƒã‚¤ã‚¹ãƒ”ã‚¯ã‚»ãƒ«æ¯”ï¼ˆDPRï¼‰ã«å¿œã˜ãŸç”»åƒé…ä¿¡:

```html
<img
  src="image-1x.jpg"
  srcset="
    image-1x.jpg 1x,
    image-2x.jpg 2x,
    image-3x.jpg 3x
  "
  alt="ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ç”»åƒ"
>
```

**å‹•ä½œ:**
- æ¨™æº–ãƒ‡ã‚£ã‚¹ãƒ—ãƒ¬ã‚¤ï¼ˆ1xï¼‰: `image-1x.jpg` ã‚’ä½¿ç”¨
- Retinaãƒ‡ã‚£ã‚¹ãƒ—ãƒ¬ã‚¤ï¼ˆ2xï¼‰: `image-2x.jpg` ã‚’ä½¿ç”¨
- é«˜è§£åƒåº¦ãƒ‡ã‚£ã‚¹ãƒ—ãƒ¬ã‚¤ï¼ˆ3xï¼‰: `image-3x.jpg` ã‚’ä½¿ç”¨

### å¹…ãƒ™ãƒ¼ã‚¹ã® srcset

ãƒ“ãƒ¥ãƒ¼ãƒãƒ¼ãƒˆå¹…ã«å¿œã˜ãŸç”»åƒé…ä¿¡:

```html
<img
  srcset="
    small-400.jpg 400w,
    medium-800.jpg 800w,
    large-1200.jpg 1200w,
    xlarge-1600.jpg 1600w
  "
  sizes="
    (max-width: 640px) 100vw,
    (max-width: 1024px) 50vw,
    800px
  "
  src="medium-800.jpg"
  alt="ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ç”»åƒ"
>
```

**sizeså±æ€§ã®èª­ã¿æ–¹:**
1. ç”»é¢å¹…ãŒ640pxä»¥ä¸‹ â†’ ç”»åƒã¯100vwï¼ˆç”»é¢å¹…å…¨ä½“ï¼‰
2. ç”»é¢å¹…ãŒ1024pxä»¥ä¸‹ â†’ ç”»åƒã¯50vwï¼ˆç”»é¢å¹…ã®åŠåˆ†ï¼‰
3. ãã‚Œä»¥ä¸Š â†’ ç”»åƒã¯800pxå›ºå®š

ãƒ–ãƒ©ã‚¦ã‚¶ã¯ã“ã®æƒ…å ±ã‚’ä½¿ã£ã¦æœ€é©ãªç”»åƒã‚’é¸æŠã—ã¾ã™ã€‚

### å®Ÿè·µä¾‹

```html
<!-- ãƒ’ãƒ¼ãƒ­ãƒ¼ç”»åƒ -->
<img
  srcset="
    hero-mobile-600.jpg 600w,
    hero-tablet-1024.jpg 1024w,
    hero-desktop-1920.jpg 1920w,
    hero-wide-2560.jpg 2560w
  "
  sizes="100vw"
  src="hero-desktop-1920.jpg"
  alt="ãƒ’ãƒ¼ãƒ­ãƒ¼ã‚¤ãƒ¡ãƒ¼ã‚¸"
  loading="eager"
>

<!-- ã‚«ãƒ¼ãƒ‰ç”»åƒï¼ˆã‚°ãƒªãƒƒãƒ‰å†…ï¼‰ -->
<img
  srcset="
    card-small-300.jpg 300w,
    card-medium-600.jpg 600w,
    card-large-900.jpg 900w
  "
  sizes="
    (max-width: 640px) 100vw,
    (max-width: 1024px) 50vw,
    33vw
  "
  src="card-medium-600.jpg"
  alt="ã‚«ãƒ¼ãƒ‰ç”»åƒ"
  loading="lazy"
>
```

## picture è¦ç´ 

ç•°ãªã‚‹ç”»é¢ã‚µã‚¤ã‚ºã§ç•°ãªã‚‹ç”»åƒã‚’è¡¨ç¤ºï¼ˆã‚¢ãƒ¼ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ï¼‰:

```html
<picture>
  <!-- ãƒ¢ãƒã‚¤ãƒ«: ç¸¦é•·ã®ç”»åƒ -->
  <source
    media="(max-width: 640px)"
    srcset="
      portrait-mobile-400.jpg 400w,
      portrait-mobile-800.jpg 800w
    "
    sizes="100vw"
  >

  <!-- ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆ: æ­£æ–¹å½¢ã®ç”»åƒ -->
  <source
    media="(max-width: 1024px)"
    srcset="
      square-tablet-600.jpg 600w,
      square-tablet-1200.jpg 1200w
    "
    sizes="100vw"
  >

  <!-- ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—: æ¨ªé•·ã®ç”»åƒ -->
  <img
    srcset="
      landscape-desktop-1200.jpg 1200w,
      landscape-desktop-2400.jpg 2400w
    "
    sizes="100vw"
    src="landscape-desktop-1200.jpg"
    alt="ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ã‚¢ãƒ¼ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³"
  >
</picture>
```

### å®Ÿç”¨ä¾‹: äººç‰©å†™çœŸ

```html
<!-- ãƒ¢ãƒã‚¤ãƒ«ã§ã¯é¡”ã‚’ã‚¯ãƒ­ãƒ¼ã‚ºã‚¢ãƒƒãƒ—ã€ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã§ã¯å…¨èº« -->
<picture>
  <source
    media="(max-width: 640px)"
    srcset="portrait-closeup.jpg"
  >
  <source
    media="(max-width: 1024px)"
    srcset="portrait-medium.jpg"
  >
  <img
    src="portrait-full.jpg"
    alt="ç¤¾å“¡ã®å†™çœŸ"
  >
</picture>
```

## æ¬¡ä¸–ä»£ç”»åƒãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ

### WebP ã¨ AVIF

```html
<picture>
  <!-- AVIF: æœ€æ–°ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆï¼ˆæœ€å°ã‚µã‚¤ã‚ºï¼‰ -->
  <source
    srcset="
      image-400.avif 400w,
      image-800.avif 800w,
      image-1200.avif 1200w
    "
    sizes="(max-width: 640px) 100vw, 800px"
    type="image/avif"
  >

  <!-- WebP: åºƒãã‚µãƒãƒ¼ãƒˆ -->
  <source
    srcset="
      image-400.webp 400w,
      image-800.webp 800w,
      image-1200.webp 1200w
    "
    sizes="(max-width: 640px) 100vw, 800px"
    type="image/webp"
  >

  <!-- JPEG: ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ -->
  <img
    srcset="
      image-400.jpg 400w,
      image-800.jpg 800w,
      image-1200.jpg 1200w
    "
    sizes="(max-width: 640px) 100vw, 800px"
    src="image-800.jpg"
    alt="æœ€é©åŒ–ã•ã‚ŒãŸç”»åƒ"
  >
</picture>
```

### ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆæ¯”è¼ƒ

```
ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºæ¯”è¼ƒï¼ˆåŒå“è³ªï¼‰:
JPEG (100%): 150 KB
WebP (65%):   97 KB  (-35%)
AVIF (45%):   67 KB  (-55%)

ãƒ–ãƒ©ã‚¦ã‚¶ã‚µãƒãƒ¼ãƒˆ:
JPEG: 100% âœ“
WebP: 96%  âœ“ï¼ˆIEé™¤ãï¼‰
AVIF: 85%  âœ“ï¼ˆæœ€æ–°ãƒ–ãƒ©ã‚¦ã‚¶ï¼‰
```

## Lazy Loadingï¼ˆé…å»¶èª­ã¿è¾¼ã¿ï¼‰

### ãƒã‚¤ãƒ†ã‚£ãƒ– Lazy Loading

```html
<!-- æœ€ã‚‚ã‚·ãƒ³ãƒ—ãƒ«ãªå®Ÿè£… -->
<img
  src="image.jpg"
  alt="é…å»¶èª­ã¿è¾¼ã¿"
  loading="lazy"
>

<!-- ç”»é¢å¤–ã®ç”»åƒã¯ã™ã¹ã¦ lazy -->
<img src="image1.jpg" alt="ç”»åƒ1" loading="lazy">
<img src="image2.jpg" alt="ç”»åƒ2" loading="lazy">
<img src="image3.jpg" alt="ç”»åƒ3" loading="lazy">

<!-- ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆãƒ“ãƒ¥ãƒ¼ã®ç”»åƒã¯ eager -->
<img src="hero.jpg" alt="ãƒ’ãƒ¼ãƒ­ãƒ¼" loading="eager">
```

### Intersection Observer ã«ã‚ˆã‚‹å®Ÿè£…

ã‚ˆã‚Šç´°ã‹ã„åˆ¶å¾¡ãŒå¿…è¦ãªå ´åˆ:

```html
<img
  data-src="image.jpg"
  alt="é…å»¶èª­ã¿è¾¼ã¿"
  class="lazy-image"
>
```

```javascript
// é…å»¶èª­ã¿è¾¼ã¿ã®å®Ÿè£…
const lazyImages = document.querySelectorAll('.lazy-image');

const imageObserver = new IntersectionObserver(
  (entries, observer) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        const img = entry.target;

        // data-src ã‹ã‚‰ src ã«ç”»åƒURLã‚’ç§»å‹•
        img.src = img.dataset.src;

        // srcset ãŒã‚ã‚‹å ´åˆ
        if (img.dataset.srcset) {
          img.srcset = img.dataset.srcset;
        }

        // èª­ã¿è¾¼ã¿å®Œäº†å¾Œ
        img.addEventListener('load', () => {
          img.classList.add('loaded');
        });

        // ç›£è¦–ã‚’è§£é™¤
        observer.unobserve(img);
      }
    });
  },
  {
    rootMargin: '50px', // ç”»é¢ã«å…¥ã‚‹50pxå‰ã«èª­ã¿è¾¼ã¿é–‹å§‹
    threshold: 0.01
  }
);

// ã™ã¹ã¦ã®ç”»åƒã‚’ç›£è¦–
lazyImages.forEach(img => imageObserver.observe(img));
```

### ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼ä»˜ã Lazy Loading

```html
<div class="image-wrapper">
  <!-- ä½è§£åƒåº¦ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼ï¼ˆLQIPï¼‰ -->
  <img
    src="placeholder-tiny.jpg"
    data-src="image-full.jpg"
    alt="ç”»åƒ"
    class="lazy-image blurred"
  >
</div>
```

```css
.image-wrapper {
  position: relative;
  overflow: hidden;
}

.lazy-image {
  width: 100%;
  height: auto;
  transition: filter 0.3s;
}

.lazy-image.blurred {
  filter: blur(20px);
  transform: scale(1.1);
}

.lazy-image.loaded {
  filter: blur(0);
  transform: scale(1);
}
```

## ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯

### 1. é©åˆ‡ãªç”»åƒã‚µã‚¤ã‚º

```javascript
// å¿…è¦ãªç”»åƒã‚µã‚¤ã‚ºã‚’è¨ˆç®—
function calculateImageSize(element) {
  const dpr = window.devicePixelRatio || 1;
  const width = element.clientWidth;
  const height = element.clientHeight;

  return {
    width: Math.ceil(width * dpr),
    height: Math.ceil(height * dpr)
  };
}

// ä½¿ç”¨ä¾‹
const img = document.querySelector('.hero-image');
const size = calculateImageSize(img);
console.log(`å¿…è¦ãªã‚µã‚¤ã‚º: ${size.width}x${size.height}`);
```

### 2. ç”»åƒã®åœ§ç¸®

```bash
# ImageMagick ã§ç”»åƒã‚’æœ€é©åŒ–
magick convert input.jpg -quality 85 -strip output.jpg

# WebP å¤‰æ›
magick convert input.jpg -quality 80 output.webp

# AVIF å¤‰æ›
avifenc --min 0 --max 63 -a end-usage=q -a cq-level=30 input.jpg output.avif
```

### 3. CSS ã§ã®æœ€é©åŒ–

```css
/* ç”»åƒã®èª­ã¿è¾¼ã¿å‰ã®ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚·ãƒ•ãƒˆã‚’é˜²ã */
img {
  max-width: 100%;
  height: auto;
  /* ã‚¢ã‚¹ãƒšã‚¯ãƒˆæ¯”ã‚’ç¶­æŒ */
  aspect-ratio: 16 / 9;
}

/* èª­ã¿è¾¼ã¿ä¸­ã®ã‚¹ã‚¿ã‚¤ãƒ« */
img:not([src]) {
  background: #1f2a37;
}

/* èª­ã¿è¾¼ã¿å¤±æ•—æ™‚ */
img[alt] {
  font-size: 0.875rem;
  color: #9ca3af;
}
```

### 4. ãƒ—ãƒªãƒ­ãƒ¼ãƒ‰

é‡è¦ãªç”»åƒã‚’å…ˆèª­ã¿:

```html
<head>
  <!-- LCPï¼ˆLargest Contentful Paintï¼‰ç”»åƒã‚’ãƒ—ãƒªãƒ­ãƒ¼ãƒ‰ -->
  <link
    rel="preload"
    as="image"
    href="hero-1920.jpg"
    imagesrcset="
      hero-600.jpg 600w,
      hero-1024.jpg 1024w,
      hero-1920.jpg 1920w
    "
    imagesizes="100vw"
  >
</head>
```

## å®Ÿè£…ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

- [ ] ã™ã¹ã¦ã®ç”»åƒã« `alt` å±æ€§
- [ ] `srcset` ã§è¤‡æ•°ã‚µã‚¤ã‚ºã‚’ç”¨æ„
- [ ] `sizes` å±æ€§ã§è¡¨ç¤ºã‚µã‚¤ã‚ºã‚’æŒ‡å®š
- [ ] WebP/AVIF ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚’ä½¿ç”¨
- [ ] `loading="lazy"` ã§é…å»¶èª­ã¿è¾¼ã¿
- [ ] ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆãƒ“ãƒ¥ãƒ¼ã¯ `loading="eager"`
- [ ] `aspect-ratio` ã§ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚·ãƒ•ãƒˆé˜²æ­¢
- [ ] é‡è¦ãªç”»åƒã¯ `preload`
- [ ] ç”»è³ªã‚’é©åˆ‡ã«åœ§ç¸®ï¼ˆ80-85%æ¨å¥¨ï¼‰
- [ ] DevTools ã§ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç¢ºèª

## ãƒ†ã‚¹ãƒˆã¨ãƒ‡ãƒãƒƒã‚°

### Chrome DevTools

```javascript
// ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ãƒ‘ãƒãƒ«ã§ç”»åƒã®èª­ã¿è¾¼ã¿ã‚’ç¢ºèª
// Network > Img ã§ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼

// ã©ã®ç”»åƒãŒèª­ã¿è¾¼ã¾ã‚ŒãŸã‹ç¢ºèª
const images = document.querySelectorAll('img');
images.forEach(img => {
  console.log({
    src: img.currentSrc, // å®Ÿéš›ã«èª­ã¿è¾¼ã¾ã‚ŒãŸç”»åƒ
    originalSrc: img.src,
    naturalWidth: img.naturalWidth,
    displayWidth: img.offsetWidth
  });
});
```

### Lighthouse ã§ãƒã‚§ãƒƒã‚¯

```
DevTools > Lighthouse > Performance

ç¢ºèªé …ç›®:
- Properly size images
- Serve images in next-gen formats
- Efficiently encode images
- Defer offscreen images
```

## ãƒ„ãƒ¼ãƒ«ã¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒª

### ç”»åƒæœ€é©åŒ–ãƒ„ãƒ¼ãƒ«

```bash
# Sharpï¼ˆNode.jsï¼‰
npm install sharp

# ç”»åƒã®ãƒªã‚µã‚¤ã‚ºã¨æœ€é©åŒ–
const sharp = require('sharp');

sharp('input.jpg')
  .resize(800, 600, { fit: 'cover' })
  .webp({ quality: 80 })
  .toFile('output.webp');
```

### ãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ«çµ±åˆ

```javascript
// Vite ã§ã®è¨­å®š
import { defineConfig } from 'vite';
import imagemin from 'vite-plugin-imagemin';

export default defineConfig({
  plugins: [
    imagemin({
      gifsicle: { optimizationLevel: 3 },
      mozjpeg: { quality: 85 },
      pngquant: { quality: [0.8, 0.9] },
      webp: { quality: 80 }
    })
  ]
});
```

## ã¾ã¨ã‚

ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ç”»åƒã¯ã€ãƒ¢ãƒ€ãƒ³ãªWebé–‹ç™ºã®å¿…é ˆæŠ€è¡“ã§ã™:

1. **srcset ã¨ sizes** - ãƒ‡ãƒã‚¤ã‚¹ã«æœ€é©ãªç”»åƒã‚’è‡ªå‹•é…ä¿¡
2. **pictureè¦ç´ ** - ã‚¢ãƒ¼ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã§æŸ”è»Ÿã«å¯¾å¿œ
3. **æ¬¡ä¸–ä»£ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ** - WebP/AVIFã§å¤§å¹…ã«ã‚µã‚¤ã‚ºå‰Šæ¸›
4. **Lazy Loading** - åˆæœŸèª­ã¿è¾¼ã¿ã‚’é«˜é€ŸåŒ–
5. **é©åˆ‡ãªæœ€é©åŒ–** - å“è³ªã¨ã‚µã‚¤ã‚ºã®ãƒãƒ©ãƒ³ã‚¹

ã“ã‚Œã‚‰ã‚’å®Ÿè£…ã™ã‚‹ã“ã¨ã§ã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãŒå‘ä¸Šã—ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“ãŒå¤§å¹…ã«æ”¹å–„ã•ã‚Œã¾ã™ã€‚

## å‚è€ƒãƒªãƒ³ã‚¯

- [Responsive Images - MDN](https://developer.mozilla.org/ja/docs/Learn/HTML/Multimedia_and_embedding/Responsive_images)
- [Image Optimization - web.dev](https://web.dev/fast/#optimize-your-images)
- [Native Lazy Loading - web.dev](https://web.dev/browser-level-image-lazy-loading/)
- [WebP Image Format](https://developers.google.com/speed/webp)
