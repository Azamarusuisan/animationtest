---
interface Props {
  prompt: string;
}

const { prompt } = Astro.props;
---

<div class="prompt-copy" style="margin: 2rem 0;">
  <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
    <h3 style="margin: 0; font-size: 1.25rem;">ðŸ“‹ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ</h3>
    <button
      class="btn btn-copy"
      data-prompt={prompt}
      style="padding: 0.5rem 1rem; font-size: 0.875rem;"
    >
      ã‚³ãƒ”ãƒ¼
    </button>
  </div>
  <pre style="background-color: var(--color-bg-alt); padding: 1rem; border-radius: var(--border-radius); overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;"><code>{prompt}</code></pre>
</div>

<script>
  document.querySelectorAll('.btn-copy').forEach(button => {
    button.addEventListener('click', async (e) => {
      const target = e.target as HTMLButtonElement;
      const prompt = target.dataset.prompt;
      if (!prompt) return;

      try {
        await navigator.clipboard.writeText(prompt);
        const originalText = target.textContent;
        target.textContent = 'âœ“ ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼';
        setTimeout(() => {
          target.textContent = originalText;
        }, 2000);
      } catch (err) {
        console.error('ã‚³ãƒ”ãƒ¼ã«å¤±æ•—ã—ã¾ã—ãŸ:', err);
        target.textContent = 'âŒ ã‚³ãƒ”ãƒ¼å¤±æ•—';
        setTimeout(() => {
          target.textContent = 'ã‚³ãƒ”ãƒ¼';
        }, 2000);
      }
    });
  });
</script>
